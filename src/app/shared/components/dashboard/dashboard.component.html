<div class="dashboard-container">
  <h1 class="dashboard-title">Dashboard</h1>

  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Chargement des données...</p>
  </div>

  <ng-container *ngIf="!isLoading">
    <div class="metrics-container">
      <div class="metric-card">
        <div class="metric-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="metric-content">
          <div class="metric-title">Total Candidates</div>
          <div class="metric-value">{{ totalCandidates | number }}</div>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">
          <i class="fas fa-clipboard-list"></i>
        </div>
        <div class="metric-content">
          <div class="metric-title">Active Tests</div>
          <div class="metric-value">{{ activeTests }}</div>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">
          <i class="fas fa-chart-bar"></i>
        </div>
        <div class="metric-content">
          <div class="metric-title">Average Score</div>
          <div class="metric-value">{{ averageScore }}%</div>
        </div>
      </div>
    </div>

    <div class="recent-tests-container">
      <h2>Recent Tests</h2>
      <div *ngIf="recentTests.length === 0" class="no-data">
        Aucun test récent à afficher.
      </div>
      <div *ngIf="recentTests.length > 0" class="table-responsive">
        <table class="tests-table">
          <thead>
            <tr>
              <th>Test Name</th>
              <th>Candidates</th>
              <th>Status</th>
              <th>Average Score</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let test of recentTests">
              <td>{{ test.name }}</td>
              <td>{{ test.candidates }}</td>
              <td
                [ngClass]="{
                  'status-active': test.status === 'Active',
                  'status-completed': test.status === 'Completed'
                }"
              >
                {{ test.status }}
              </td>
              <td>{{ test.averageScore }}%</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </ng-container>
</div>
